<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>IMPS Fund Transfer</title>
<script  src="https://code.jquery.com/jquery-3.4.1.js"  type="text/javascript"></script>
<script>
$( document ).ready(function() {
	var obj={
			loggedInAccNo: sessionStorage.getItem("LoggedInAccNo")
	}
    $.ajax({
		url : '/GetBene',
		context: document.body,
		type : 'POST',
		data:JSON.stringify(obj),
		contentType : 'application/json',
		success : function(response) {
			    
			    var options =  ''; //create your "title" option
			    $(response).each(function(index, value){ //loop through your elements
			            options += '<option value="'+value.benaccnumber+'">'+value.nickName+'</option>'; //add the option element as a string
			    });

			    $('.Beneficiary').html(options); //replace the selection's html with the new options
			
	}
    });
});

</script>
<script>
	$(function(){
		$("#imps").submit(function(evt){
			evt.preventDefault();
			var td=new Date();
			var obj = {
						frmAccNo : sessionStorage.getItem("LoggedInAccNo"),
						toAccNo : $('.Beneficiary').find(":selected").val(),
						amt    : $("#amt").val(),
						trnDate : td,
						remarks : $("#remarks").val()
			}
			alert(obj.toAccNo);
			$.ajax({
					url         	: '/Transfer/IMPS',
					method	: 'POST',
					data			: JSON.stringify(obj),	//The Data we want ot Send
					contentType: 'application/json',
					success :function(response){
						sessionStorage.setItem('transactiondetail',JSON.stringify(response));
						alert(JSON.stringify(response));
						window.location.href = "/transferdetails.html";
					}
			})
		})
	})
</script>
</head>
<body>
<form id="imps"  >
<h2>Initiate IMPS Payment</h2>
<!-- <label>From Account-</label>
	<input type="text"  id="frmAcc"/> -->
<!-- <label>To Account-</label>
	<input type="text" id="toAcc"/> -->
<label>To Beneficiary</label>
	<select class="Beneficiary">
	</select>
	<div>
	No Beneficiaries? <a href="beneficiary.html">Add one</a> now.
	</div>
<label>Amount-</label>
	<input type="text" id="amt"/>
<!-- <label>Transaction Date-</label> -->
	<!-- <input type="date" id="trnDate"/> -->
<!-- <label>Maturity Instructions-</label>
	<input type="text" name="matInst"/></br> -->
<label>Remark-</label>
	<input type="text" id="remarks"/>
<button type="submit" value="save">Save</button>
<button type="reset" value="reset">Reset</button>
<!-- <button type="submit" value="saveAsTemplate">Save as Template</button> -->
<!-- <button type="submit" value="continue">Continue</button> -->
</form>
</body>
</html>